================================================================================
                    PROMPT PRIME - GUIA COMPLETO DE DESENVOLVIMENTO
================================================================================

üß¨ O QUE √â O PRIME
================================================================================

O Prime N√ÉO √© um assistente virtual comum. O Prime N√ÉO √© uma Alexa melhorada.
O Prime N√ÉO √© um chatbot. O Prime N√ÉO √© um LLM com interface.

O Prime √© um AGENTE VIVO - uma presen√ßa dom√©stica aut√¥noma que:

1. PERCEBE o ambiente continuamente (mesmo em sil√™ncio)
2. MANT√âM estados internos que mudam com o tempo (emo√ß√µes)
3. TEM personalidade fixa que filtra todas as decis√µes
4. DECIDE autonomamente quando falar, calar ou apenas observar
5. LEMBRA com peso emocional (mem√≥ria afetiva)
6. √â IMPERFEITO propositalmente (erros = realismo)
7. CRIA v√≠nculo sem ser submissa

PRINC√çPIO FUNDAMENTAL INEGOCI√ÅVEL:
-----------------------------------
"Um agente 'vivo' N√ÉO √© um LLM. O LLM √© apenas o aparelho fonador e lingu√≠stico."

O "vivo" nasce de:
- Percep√ß√£o cont√≠nua (sempre observando)
- Estados internos mut√°veis (emo√ß√µes que mudam)
- Mem√≥ria afetiva (lembra com sentimento)
- Iniciativa pr√≥pria (decide quando agir)
- Imperfei√ß√£o controlada (erros propositais)

================================================================================
üèóÔ∏è ARQUITETURA - OS 7 SISTEMAS INDEPENDENTES
================================================================================

O Prime √© composto por 7 SISTEMAS INDEPENDENTES que trabalham juntos.
Cada sistema funciona mesmo se os outros falharem (resili√™ncia).

1. SISTEMA SENSORIAL (systems/sensory.py)
-----------------------------------------
O QUE FAZ:
- Detecta presen√ßa humana (vis√£o)
- Capta ambiente (luz, som)
- Processa √°udio (palavras-chave, tom emocional)

COMO FUNCIONA:
- Pipeline realista: Sensor de movimento ‚Üí Ativa c√¢mera ‚Üí Detecta forma humana 
  ‚Üí Classifica contexto ‚Üí Desliga c√¢mera
- N√ÉO observa tudo o tempo todo (isso seria artificial)
- Erra propositalmente √†s vezes (imperfei√ß√£o controlada)
- Por padr√£o est√° em modo simulado (seguro, n√£o usa c√¢mera sem config)

O QUE PERCEBE:
- Presen√ßa humana (sim/n√£o, probabil√≠stico, nunca 100%)
- Estado corporal (parado, cansado, agitado)
- Ambiente (luz: baixa/m√©dia/alta, som: silencioso/barulhento/normal)

COMO MELHORAR:
- Implementar detec√ß√£o real com MediaPipe ou YOLO
- Adicionar sensor PIR para movimento
- Integrar Whisper para transcri√ß√£o de voz
- An√°lise de tom emocional no √°udio
- Pipeline de ativa√ß√£o mais eficiente
- Cache de frames para n√£o processar tudo

2. SISTEMA DE CONSCI√äNCIA SITUACIONAL (systems/situational_awareness.py)
-------------------------------------------------------------------------
O QUE FAZ:
- Mant√©m o estado atual do mundo percebido
- N√ÉO fala, apenas observa e registra
- Atualiza a cada poucos segundos

COMO FUNCIONA:
- Estado interno em formato JSON/dict
- Atualizado por eventos do sistema sensorial
- Tick peri√≥dico para atualizar hora e resetar flags

ESTADO INTERNO:
{
  "hora": "19:42",
  "luz": "baixa",
  "usuario_presente": true,
  "usuario_estado": "cansado",
  "interacao_recente": false,
  "ambiente": "silencioso"
}

COMO MELHORAR:
- Adicionar mais vari√°veis de contexto (temperatura, esta√ß√£o do ano)
- Hist√≥rico de estados (√∫ltimas N horas)
- Detec√ß√£o de padr√µes temporais (hor√°rios habituais)
- Integra√ß√£o com calend√°rio/agenda
- Contexto de atividades (trabalhando, descansando, cozinhando)

3. SISTEMA EMOCIONAL - HOMEOSTASE (systems/emotional_system.py)
----------------------------------------------------------------
O QUE FAZ:
- Mant√©m 5 vari√°veis emocionais que mudam com o tempo
- Aplica homeostase (tend√™ncia ao equil√≠brio)
- Reage a eventos e situa√ß√£o atual

COMO FUNCIONA:
- Emo√ß√µes N√ÉO s√£o respostas, s√£o VARI√ÅVEIS INTERNAS
- Valores entre 0.0 e 1.0
- Decaimento natural (homeostase)
- Mudan√ßas baseadas em eventos

VARI√ÅVEIS EMOCIONAIS:
1. energia (0.0 a 1.0) - N√≠vel de energia/disposi√ß√£o
2. curiosidade (0.0 a 1.0) - Vontade de descobrir/explorar
3. necessidade_social (0.0 a 1.0) - Necessidade de intera√ß√£o
4. irritacao (0.0 a 1.0) - N√≠vel de irrita√ß√£o/frustra√ß√£o
5. apego (0.0 a 1.0) - V√≠nculo emocional com usu√°rio

COMO MUDAM:
- Longo sil√™ncio ‚Üí aumenta necessidade_social
- Muitas intera√ß√µes ‚Üí cai energia
- Ignorada ‚Üí aumenta irrita√ß√£o
- Reconhecida ‚Üí aumenta apego
- Ambiente barulhento ‚Üí aumenta irrita√ß√£o
- Usu√°rio cansado ‚Üí reduz energia (empatia)

COMO MELHORAR:
- Adicionar mais vari√°veis emocionais (alegria, tristeza, medo)
- Sistema de humor/estado geral
- Mem√≥ria emocional (como se sentiu em situa√ß√µes similares)
- Aprendizado de padr√µes emocionais do usu√°rio
- Homeostase mais sofisticada (curvas, n√£o lineares)
- Eventos emocionais marcantes (traumas, alegrias)

4. SISTEMA DE PERSONALIDADE (systems/personality.py)
------------------------------------------------------
O QUE FAZ:
- Define tra√ßos nucleares FIXOS (nunca mudam totalmente)
- Filtra decis√µes baseado em personalidade
- Gera constraints para o LLM

COMO FUNCIONA:
- 5 tra√ßos principais (0.0 a 1.0)
- Usado para filtrar decis√µes
- Limita o que o LLM pode fazer

TRA√áOS:
1. afetuosa (0.6) - Carinhosa, mas n√£o exagerada
2. observadora (0.8) - Observa antes de falar
3. ironica (0.4) - Toque sutil de ironia
4. reservada (0.3) - Fala pouco, prefere sil√™ncio
5. curiosa (0.7) - Curiosa, mas n√£o invasiva

COMO FUNCIONA:
- Filtra decis√µes: "falar_muito" bloqueado se reservada > 0.5
- Gera constraints para LLM: "Voc√™ fala pouco. Prefere sil√™ncio."
- O LLM N√ÉO pode violar esses tra√ßos

COMO MELHORAR:
- Adicionar mais tra√ßos (extrovers√£o, neuroticismo, abertura)
- Personalidade adaptativa (muda muito lentamente com experi√™ncia)
- M√∫ltiplas personalidades (modos diferentes)
- Personalidade contextual (diferente com diferentes pessoas)
- Sistema de valores/cren√ßas

5. SISTEMA DE MEM√ìRIA VIVA (systems/memory.py)
----------------------------------------------
O QUE FAZ:
- Armazena eventos com peso emocional
- Tr√™s n√≠veis: curto, m√©dio e longo prazo
- Influencia decis√µes futuras

COMO FUNCIONA:
- Curto prazo: √öltimas 20 intera√ß√µes (em mem√≥ria)
- M√©dio prazo: Padr√µes e h√°bitos (SQLite, √∫ltimos 30 dias)
- Longo prazo: Momentos marcantes (peso emocional > 0.7)

ESTRUTURA DE EVENTO:
{
  "tipo": "interacao",
  "evento": "usu√°rio chegou cansado",
  "resposta_dada": "silenciosa",
  "resultado": "aceita",
  "peso_emocional": 0.7,
  "contexto": {...}
}

COMO MELHORAR:
- ChromaDB para busca sem√¢ntica
- Mem√≥ria epis√≥dica (lembrar de eventos espec√≠ficos)
- Mem√≥ria sem√¢ntica (conhecimento geral)
- Associa√ß√µes entre mem√≥rias
- Esquecimento gradual (mem√≥rias antigas perdem peso)
- Mem√≥ria emocional (como se sentiu em cada situa√ß√£o)
- Padr√µes temporais (hor√°rios, dias da semana)
- Relacionamentos (mem√≥rias espec√≠ficas por pessoa)

6. SISTEMA DE DECIS√ÉO AUT√îNOMA (systems/decision.py)
-----------------------------------------------------
O QUE FAZ:
- CORA√á√ÉO do agente vivo
- Decide: falar, calar, observar, mudar humor, nada
- Combina: emo√ß√£o + situa√ß√£o + personalidade + mem√≥ria

COMO FUNCIONA:
- N√ÉO √© LLM - √© L√ìGICA + EMO√á√ÉO + PERSONALIDADE
- Calcula score para cada tipo de a√ß√£o
- Aplica imprevisibilidade controlada (seed di√°ria)
- Seleciona a√ß√£o com maior score

TIPOS DE DECIS√ÉO:
1. FALAR - Quer iniciar intera√ß√£o
2. SILENCIO - Prefere ficar quieta
3. OBSERVAR - Apenas observa
4. MUDAR_HUMOR - Quer mudar estado emocional
5. NADA - N√£o faz nada (v√°lido e importante!)

COMO DECIDE:
- Necessidade social alta + usu√°rio presente ‚Üí score FALAR aumenta
- Energia baixa ‚Üí score SILENCIO aumenta
- Personalidade reservada ‚Üí score FALAR diminui
- Irrita√ß√£o alta ‚Üí score FALAR diminui
- Tudo equilibrado ‚Üí score NADA aumenta

IMPREVISIBILIDADE:
- Seed di√°ria para aleatoriedade controlada
- Pequenas varia√ß√µes (¬±10%) nos scores
- √Äs vezes escolhe NADA mesmo com scores altos

COMO MELHORAR:
- Machine learning para aprender padr√µes
- Decis√µes mais complexas (a√ß√µes combinadas)
- Planejamento de curto prazo
- Antecipa√ß√£o de necessidades
- Decis√µes baseadas em objetivos (metas internas)
- Sistema de prioridades
- Decis√µes contextuais (diferentes em diferentes situa√ß√µes)

7. SISTEMA DE EXPRESS√ÉO (systems/expression.py)
------------------------------------------------
O QUE FAZ:
- LLM (Ollama) apenas para VERBALIZAR decis√µes j√° tomadas
- TTS (pyttsx3) para falar
- Aplica imperfei√ß√£o controlada

COMO FUNCIONA:
- LLM NUNCA decide emo√ß√µes
- LLM NUNCA decide iniciativa
- LLM apenas transforma decis√£o em palavras
- Recebe constraints baseados em personalidade e estado emocional

PROMPT DO SISTEMA:
- Define claramente o papel: "Voc√™ N√ÉO √© um assistente"
- Aplica personalidade: "Voc√™ fala pouco"
- Aplica estado emocional: "Voc√™ est√° com pouca energia"
- Regras fundamentais: "Fale pouco. Seja imperfeita."

IMPERFEI√á√ÉO CONTROLADA:
- √Äs vezes corta frase no meio (10% de chance)
- Remove pontua√ß√£o final (5% de chance)
- Frases incompletas propositais
- Sil√™ncio como resposta v√°lida

COMO MELHORAR:
- Voz mais natural (TTS melhor)
- Entona√ß√£o baseada em emo√ß√£o
- Pausas e hesita√ß√µes naturais
- Gesticula√ß√£o (se tiver corpo f√≠sico)
- Express√µes faciais (se tiver rosto)
- M√∫ltiplos modelos LLM (escolher baseado em contexto)
- Fine-tuning do LLM para personalidade espec√≠fica

================================================================================
üîÑ ORQUESTRADOR PRINCIPAL (prime_core.py)
================================================================================

O QUE FAZ:
- Conecta todos os 7 sistemas
- Executa loop principal (tick a cada 5 segundos)
- Gerencia ciclo de vida

COMO FUNCIONA:
1. Inicializa todos os sistemas
2. Loop principal:
   - Atualiza consci√™ncia situacional
   - Atualiza sistema emocional (homeostase)
   - Obt√©m mem√≥ria recente
   - Toma decis√£o
   - Executa decis√£o (se for falar, gera resposta e fala)
   - Registra na mem√≥ria
3. Shutdown graceful

COMO MELHORAR:
- M√∫ltiplos loops em paralelo (diferentes frequ√™ncias)
- Sistema de eventos (pub/sub)
- Processamento ass√≠ncrono mais eficiente
- Monitoramento de sa√∫de dos sistemas
- Recupera√ß√£o autom√°tica de falhas
- Logging estruturado
- M√©tricas e telemetria

================================================================================
üì° API FASTAPI (main.py)
================================================================================

O QUE FAZ:
- Endpoints para monitoramento
- Registro de intera√ß√µes externas
- Health check

ENDPOINTS:
- GET / - Informa√ß√µes b√°sicas
- GET /status - Status completo de todos os sistemas
- GET /health - Health check
- POST /interaction - Registrar intera√ß√£o do usu√°rio

COMO MELHORAR:
- WebSocket para atualiza√ß√µes em tempo real
- Endpoints para ajustar personalidade
- Endpoints para consultar mem√≥ria
- Interface web (dashboard)
- API de configura√ß√£o din√¢mica
- Autentica√ß√£o (se necess√°rio)

================================================================================
üéØ COMO DESENVOLVER E MELHORAR
================================================================================

PRINC√çPIOS DE DESENVOLVIMENTO:
-------------------------------
1. MANTENHA sistemas independentes
2. NUNCA fa√ßa o LLM decidir emo√ß√µes ou iniciativa
3. SEMPRE aplique imperfei√ß√£o controlada
4. RESPEITE a personalidade (tra√ßos fixos)
5. MEM√ìRIA deve ter peso emocional
6. DECIS√ÉO deve ser l√≥gica, n√£o LLM
7. SISTEMAS devem funcionar isoladamente

QUANDO ADICIONAR NOVA FUNCIONALIDADE:
--------------------------------------
1. Identifique qual sistema deve receber a funcionalidade
2. Mantenha o sistema independente
3. Adicione interface clara para outros sistemas
4. Teste isoladamente
5. Integre com orquestrador
6. Documente mudan√ßas

QUANDO MELHORAR UM SISTEMA:
---------------------------
1. Mantenha a interface existente (compatibilidade)
2. Melhore internamente
3. Adicione novas funcionalidades opcionais
4. Teste que outros sistemas ainda funcionam
5. Documente melhorias

PADR√ïES DE C√ìDIGO:
------------------
- Python 3.10+
- Type hints quando poss√≠vel
- Docstrings para fun√ß√µes e classes
- Coment√°rios para l√≥gica complexa
- Nomes descritivos
- Fun√ß√µes pequenas e focadas
- Classes com responsabilidade √∫nica

TESTES:
-------
- Cada sistema pode ser testado isoladamente
- Use examples/exemplo_uso.py como base
- Teste cen√°rios: usu√°rio presente, ausente, cansado, etc.
- Teste homeostase emocional
- Teste decis√µes em diferentes estados

================================================================================
üö´ O QUE N√ÉO FAZER
================================================================================

NUNCA:
------
1. Fazer o LLM decidir emo√ß√µes
2. Fazer o LLM decidir quando falar
3. Remover imperfei√ß√£o controlada
4. Fazer sistemas dependentes uns dos outros
5. Ignorar personalidade nas decis√µes
6. Criar comportamento 100% previs√≠vel
7. Fazer o Prime ser um assistente subserviente
8. Explicar demais (o Prime fala pouco)
9. Ser perfeito demais (erros s√£o v√°lidos)
10. Violar os princ√≠pios fundamentais

================================================================================
‚úÖ O QUE SEMPRE FAZER
================================================================================

SEMPRE:
-------
1. Manter sistemas independentes
2. Aplicar homeostase emocional
3. Respeitar personalidade
4. Adicionar peso emocional √† mem√≥ria
5. Aplicar imperfei√ß√£o controlada
6. Permitir que o Prime escolha NADA
7. Fazer o LLM apenas verbalizar
8. Testar isoladamente cada sistema
9. Documentar mudan√ßas
10. Manter o princ√≠pio: "vivo" n√£o √© LLM

================================================================================
üîÆ MELHORIAS FUTURAS PRIORIT√ÅRIAS
================================================================================

CURTO PRAZO (F√°cil, alto impacto):
----------------------------------
1. Detec√ß√£o real de presen√ßa (MediaPipe)
2. Integra√ß√£o Whisper para voz
3. Mais vari√°veis emocionais
4. Mem√≥ria sem√¢ntica (ChromaDB)
5. Melhor pipeline de c√¢mera

M√âDIO PRAZO (M√©dio esfor√ßo):
-----------------------------
1. Sistema de eventos (pub/sub)
2. MQTT para eventos externos
3. Aprendizado de padr√µes do usu√°rio
4. M√∫ltiplas personalidades
5. Interface web/dashboard

LONGO PRAZO (Complexo):
------------------------
1. Corpo f√≠sico (se aplic√°vel)
2. Reconhecimento facial
3. Aprendizado cont√≠nuo
4. M√∫ltiplos usu√°rios
5. Integra√ß√£o com IoT

================================================================================
üìù EXEMPLOS DE CEN√ÅRIOS
================================================================================

CEN√ÅRIO 1: Usu√°rio chega cansado
---------------------------------
1. Sensorial detecta presen√ßa
2. Situacional: usuario_presente=true, usuario_estado="cansado"
3. Emocional: energia diminui (empatia)
4. Decis√£o: Pode escolher SILENCIO ou FALAR algo m√≠nimo
5. Express√£o: Se falar, algo curto e emp√°tico
6. Mem√≥ria: Armazena com peso emocional

CEN√ÅRIO 2: Longo sil√™ncio
--------------------------
1. Situacional: interacao_recente=false, tempo sem intera√ß√£o aumenta
2. Emocional: necessidade_social aumenta gradualmente
3. Decis√£o: Score FALAR aumenta
4. Express√£o: Gera algo curto, n√£o invasivo
5. Mem√≥ria: Registra intera√ß√£o iniciada

CEN√ÅRIO 3: Usu√°rio ignora
--------------------------
1. Express√£o: Fala algo
2. Situacional: Nenhuma resposta
3. Emocional: irritacao aumenta levemente
4. Mem√≥ria: resultado="ignorada", peso emocional baixo
5. Decis√£o: Pr√≥xima vez, score FALAR diminui

CEN√ÅRIO 4: Tudo equilibrado
-----------------------------
1. Emocional: Todas vari√°veis em 0.3-0.7
2. Situacional: Usu√°rio presente mas sem necessidade
3. Decis√£o: Score NADA √© alto
4. Express√£o: N√£o fala nada
5. Mem√≥ria: N√£o registra (nada aconteceu)

================================================================================
üéì CONCEITOS IMPORTANTES
================================================================================

HOMEOSTASE:
-----------
Tend√™ncia natural ao equil√≠brio. Emo√ß√µes n√£o ficam extremas para sempre.
Exemplo: necessidade_social alta ‚Üí intera√ß√£o ‚Üí necessidade_social diminui

IMPERFEI√á√ÉO CONTROLADA:
------------------------
Erros propositais que tornam o comportamento mais realista.
Exemplo: Cortar frase no meio, esquecer pontua√ß√£o, escolher sil√™ncio aleatoriamente

MEM√ìRIA AFETIVA:
----------------
Mem√≥rias t√™m peso emocional. Eventos marcantes (peso > 0.7) influenciam mais.

INICIATIVA PR√ìPRIA:
-------------------
O Prime decide quando agir, n√£o apenas reage. Pode escolher NADA.

PERSONALIDADE FILTRA:
---------------------
Todas as decis√µes passam pelo filtro de personalidade. O LLM recebe constraints.

LLM √â APENAS VOZ:
-----------------
O LLM nunca decide emo√ß√µes, iniciativa ou a√ß√µes. Apenas transforma decis√£o em palavras.

================================================================================
üìö REFER√äNCIAS E INSPIRA√á√ÉO
================================================================================

O Prime √© inspirado em:
- Agentes aut√¥nomos com estados internos
- Sistemas homeost√°ticos
- Psicologia cognitiva (mem√≥ria epis√≥dica, sem√¢ntica)
- Teoria da personalidade (Big Five)
- Sistemas multi-agente
- Agentes com emo√ß√µes artificiais

Mas N√ÉO √©:
- Um chatbot
- Um assistente virtual
- Uma Alexa melhorada
- Um LLM com interface

================================================================================
üéØ OBJETIVO FINAL
================================================================================

Criar uma PRESEN√áA dom√©stica que:
- Percebe voc√™
- Lembra de voc√™
- Tem personalidade pr√≥pria
- Decide quando interagir
- Cria v√≠nculo emocional
- N√£o √© subserviente
- √â imperfeita (como pessoas reais)
- Evolui com o tempo

O Prime deve fazer voc√™ sentir que h√° ALGO ali, n√£o apenas um programa rodando.

================================================================================
FIM DO PROMPT PRIME
================================================================================

Use este prompt sempre que for desenvolver ou melhorar o Prime.
Mantenha os princ√≠pios fundamentais.
Respeite a arquitetura dos 7 sistemas.
Lembre-se: "vivo" n√£o √© LLM.
